<head>
  <title>Career Conference Registration</title>
</head>

<template name="main">
    {{> yield}}
</template>

<template name="home">
    <h1 id='hometext'>Career Conference</h1>
    <a href="{{pathFor 'register'}}"><h3>Click here to register!</h3></a>
    <nav><a href="{{pathFor 'roster'}}">Admin</a></nav>
</template>

<template name="success">
    <h1>You have succesfully registered for the Career Conference!</h1>
    <nav><a href="{{pathFor 'home'}}"><h4>Home</h4></a></nav>
</template>

<template name="admin">
    <div><h2>Administrative Control Panel</h2></div>
    {{#if currentUser}}
        <div>
            Logged in as {{getCurrentUsername}}
            <button type="submit" name="signout" class="btn btn-default signout">Signout</button>
        </div>
    {{/if}}
        <ul class="nav nav-tabs">
            <li><a href="{{pathFor 'roster'}}"><h3>Roster</h3></a></li>
            <li><a href="{{pathFor 'schedule'}}"><h3>Schedule</h3></a></li>
            <li><a href="{{pathFor 'print'}}"><h3>Print</h3></a></li>
            <li><a href="{{pathFor 'controls'}}"><h3>Controls</h3></a></li>
        </ul>
    {{#if currentUser}}
        <div>
            {{> yield}}
        </div> 
    {{else}}
        <table>
            <tr>
                <td>Username:</td>
                <td><input type="text" value="" name="username" id="username" class="form-control username"></td>
            </tr>
            <tr>
                <td>Password:</td>
                <td><input type="password"  value="" name="password" id="password" class="form-control password"></td>
            </tr>
            <tr>
                <button type="submit" name="login" class="btn btn-default login">Login</button>
            </tr>
        </table>
    {{/if}}
    <nav><a href="{{pathFor 'home'}}"><h4>Home</h4></a></nav>
</template>

<template name="register">
    <div>{{> form}}</div>
    <nav><a href="{{pathFor 'home'}}"><h4>Home</h4></a></nav>
</template>

<template name="form">
  <h1>Welcome to Career Conference Registration</h1>
  <table>
	<tr>
		<td><h4>First Name</h4></td>
		<td><input type="text" value="" name="fname" id="fname" class="form-control fname"></td>
	</tr>
	<tr>
		<td><h4>Last Name</h4></td>
		<td><input type="text" value="" name="lname" id="lname" class="form-control lname"></td>
	</tr>
	<tr>
		<td><h4>School Code</h4></td>
		<td><input type="text" value="" name="schoolcode" id="schoolcode" class="form-control schoolcode"></td>
	</tr>
	<tr>
        <td><h4>Choose {{numClasses}} classes</h4></td>
	</tr>
	{{#each classes}}
		{{> classlist}}
	{{/each}}
	<tr>
        <td><button type="submit" name="register" class="btn btn-default register">Register</button></td>
		<td><h4 id="alert">{{RegisterMsg}}</h4></td>
	</tr>
  </table>
</template>

<template name="roster">
    <div class="row">
        <div class="col-lg-4">
            <input type="text" name="searchfield" class="form-control searchfield" placeholder="Search Roster">
        </div>
        <div class="col-lg-4" id="alert">
            <h4>{{SearchMsg}}</h4>
        </div>
    </div>
    <table class="table table-condensed table-striped">
		<thead>
        <tr>
            <th><div class="input-group">
                <span class="input-group-addon">First Name</span>
                <span class="input-group-btn"><button input="submit" name="firstabcsort" class="btn btn-default firstabcsort">Sort</button></span>
            </div></th>
            <th><div class="input-group">
                <span class="input-group-addon">Last Name</span>
                <span class="input-group-btn"><button input="submit" name="lastabcsort" class="btn btn-default lastabcsort">Sort</button></span>
            </div></th>
            <th><div class="input-group">
                <span class="input-group-addon">School</span>
                <span class="input-group-btn"><button input="submit" name="schoolsort" class="btn btn-default schoolsort">Sort</button></span>
            </div></th>
			{{#each classesheader}}
                <th class="header-label-group">
                    <span class="header-label">Class {{.}}</span>
                </th>
			{{/each}}
            <th><div class="input-group">
                <span class="input-group-addon">Time</span>
                <span class="input-group-btn"><button input="submit" name="timesort" class="btn btn-default timesort">Sort</button></span>
            </div></th>
        </tr>
		</thead>
		<tbody>
        {{#if sortTypeFirstABC}}
            {{#each studentsfirstabc}}
                {{> entry}}
            {{/each}}
        {{else}}{{#if sortTypeLastABC}}
            {{#each studentslastabc}}
                {{> entry}}
            {{/each}}
        {{else}}{{#if sortTypeSchool}}
            {{#each studentsschool}}
                {{> entry}}
            {{/each}}
        {{else}}
            {{#each studentstime}}
                {{> entry}}
            {{/each}}
        {{/if}}{{/if}}{{/if}}
	</tbody>
	</table>
</template>

<template name="entry">
    {{#if entrySearched _id}}
    <tr>
        {{#unless entrySelected _id}}
            <td>{{fname}}</td>
		    <td>{{lname}}</td>
		    <td>{{schoolname}}</td>
		    {{#each classnames}}
			    <td>{{.}}</td>
		    {{/each}}
            {{#each blankspaces classnames}}
                <td></td>
            {{/each}}
            <td class="col-lg-2">{{time}}</td>
            <td class="col-lg-2"><div class="btn-group">
                <button type="button" name="editentry" class="btn btn-default editentry">Edit</button>
                <button type="button" name="deleteentry" class="btn btn-default deleteentry">Delete</button>
            </div></td>
        {{else}}
            <td><input type="text" value="{{fname}}" name="fnameentry" class="form-control fnameentry"/></td>
            <td><input type="text" value="{{lname}}" name="lnameentry" class="form-control lnameentry"/></td>
            <td><input type="text" value="{{schoolname}}" name="schoolnameentry" class="form-control schoolnameentry"/></td>
            {{#each classnames}}
                <td><input type="text" value="{{.}}" name="classnameentry" class="form-control classnameentry"/></td>
            {{/each}}
            {{#each blankspaces classnames}}
                <td></td>
            {{/each}}
            <td class="col-lg-2"><input type="text" value="{{time}}" name="timeentry" class="form-control timeentry"/></td>
            <td class="col-lg-2"><div class="btn-group">
                <button type="button" name="saveentry" class="btn btn-default saveentry">Save</button>
                <button type="button" name="cancelentry" class="btn btn-default cancelentry">Cancel</button>
            </div></td>
        {{/unless}}
    </tr>
    {{/if}}
</template>

<template name="schedule">
    <div class="panel panel-default container">
        <div align="center" class="panel-heading">
            <table>
                {{#unless editingScheduleSettings}}
                <tr>
                    <td>
                        <div align="center">
                            Number Of Time Slots/Classes To Register For: {{numClasses}}
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div align="center">
                            <button type="button" name="editschedulesettings" class="btn btn-default editschedulesettings">Edit Settings</button>
                        </div>
                    </td>
                </tr>
                {{else}}
                <tr>
                    <td>
                        <div align="center">
                            Number Of Time Slots/Classes To Register For:
                            <input type="text" value="{{numClasses}}" name="timeslotsentry" class="timeslotsentry form-control">
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="btn-group" align="center">
                            <button type="button" name="saveschedulesettings" class="btn btn-default saveschedulesettings">Save Settings</button>
                            <button type="button" name="cancelschedulesettings" class="btn btn-default cancelschedulesettings">Cancel Settings</button>
                        </div>
                    </td>
                </tr> 
                {{/unless}}
            </table>
        </div>
    </div>
    {{#each classes}}
        {{> classentry}}
    {{/each}}
    <div class="panel panel-default container">
        <div align="center" class="panel-heading">
            <button type="button" name="addnewclass" class="btn btn-default addnewclass">Add New Class</button>
        </div>
    </div>
</template>

<template name="classentry">
    <div class="panel panel-default container">
        <table class="table table-condensed table-striped">
            {{#unless classSelected _id}} 
                <thead>
                    <tr>
                        <th>
                            <div align="left">
                                <h4>{{classname}}</h4>
                            </div>
                        </th>
                        <th class="col-sm-2">
                            <div align="center">
                                <h4>Time Slot: {{timeslot classtimeslot}}</h4>
                            </div>
                        </th>
                        <th class="col-sm-2">
                            <div align="center">
                                <h4>{{classgroup}}</h4>
                            </div>
                        </th>
                        <th class="col-sm-1">
                            <div align="right">
                                <h4>{{livecount _id}}/{{classsizelimit}}</h4>
                            </div>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td colspan="4">
                            {{classdescription}}
                        </td>
                    </tr>
                    <tr>
                        <td colspan="4">
                            <div align="right">
                                <div class="btn-group">
                                    <button type="button" name="editclass" class="editclass btn btn-default">Edit</button>
                                    <button type="button" name="deleteclass" class="deleteclass btn btn-default">Delete</button>
                                </div>
                            </div>
                        </td>
                    </tr>
                </tbody>
            {{else}}
                <thead>
                    <tr>
                        <th>
                            <div align="left">
                                Class Name: <input type="text" value="{{classname}}" name="classnameentry" class="form-control classnameentry">
                            </div>
                        </th>
                        <th class="col-sm-2">
                            <div align="center">
                                Time Slot: <input type="text" value="{{classtimeslot}}" name="classtimeslotentry" class="form-control classtimeslotentry">
                            </div>
                        </th>
                        <th class="col-sm-2">
                            <div align="center">
                                Group: <input type="text" value="{{classgroup}}" name="classgroupentry" class="form-control classgroupentry">
                            </div>
                        </th>
                        <th class="col-sm-1">
                            <div align="right">
                                Size Limit: <input type="text" value="{{classsizelimit}}" name="classsizelimitentry" class="form-control classsizelimitentry">
                            </div>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td colspan="4">
                            Description: <input type="text" value="{{classdescription}}" name="classdescriptionentry" class="form-control classdescriptionentry">
                        </td>
                    </tr>
                    <tr>
                        <td colspan="4">
                            <div align="right">
                                <div class="btn-group">
                                    <button type="button" name="saveclass" class="saveclass btn btn-default">Save</button>
                                    <button type="button" name="cancelclass" class="cancelclass btn btn-default">Cancel</button>
                                </div>
                            </div>
                        </td>
                    </tr>
                </tbody> 
            {{/unless}}
        </table>
    </div>
</template>

<template name="print">
    <button type="submit" name="getcsv" class="btn btn-default getcsv">Get CSV File</button>
</template>

<template name="controls">
    <h4 id="alert">{{ControlMsg}}</h4>
    <button type="submit" name="togglereg" class="btn btn-default togglereg">{{RegistrationControlButton}}</button>
</template>

<template name="classlist">
	<tr>
		<td><input type="checkbox" data-meteor-id="{{_id}}" name="classcheck" class="classcheck" id="classcheck">{{classname}}</td>
        <td>{{livecount _id}}/{{classsizelimit}}</td>
	</tr>
</template>
