<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wayne County Career Conference</title>
</head>

<template name="main">
    {{> yield}}
</template>

<template name="home">
    <div align="center">
        <h1 id='hometext'>Wayne County Career Conference</h1>
        <div class="panel panel-default container" align="center">
            <h4>{{{maindescription}}}</h4>
            <a href="{{pathFor 'register'}}"><h3>Click here to register!</h3></a>
        </div>
        <nav><a href="{{pathFor 'roster'}}">Admin</a></nav>
    </div>
</template>

<template name="success">
    <h1>You have succesfully registered for the Wayne County Career Conference!</h1>
    <nav><a href="{{pathFor 'home'}}"><h4>Home</h4></a></nav>
</template>

<template name="admin">
    <div><h2>Administrative Control Panel</h2></div>
    
    {{#if currentUser}}
        <div>
            <span class="glyphicon glyphicon-user"></span>Logged in as {{getCurrentUsername}}
            <button type="submit" name="signout" class="btn btn-default signout">Signout</button>
        </div>
    {{/if}}
    
    {{#if currentUser}}
        <ul class="nav nav-tabs">
            <li><a href="{{pathFor 'roster'}}"><h3>Roster</h3></a></li>
            <li><a href="{{pathFor 'general'}}"><h3>General</h3></a></li>
            <li><a href="{{pathFor 'classes'}}"><h3>Classes</h3></a></li>
            <li><a href="{{pathFor 'schools'}}"><h3>Schools</h3></a></li>
            <li><a href="{{pathFor 'codes'}}"><h3>Codes</h3></a></li>
            <li><a href="{{pathFor 'print'}}"><h3>Print</h3></a></li>
            <li><a href="{{pathFor 'controls'}}"><h3>Controls</h3></a></li>
        </ul>
 
        <div>
            {{> yield}}
        </div> 
    {{else}}
        <table>
            <tr>
                <td>Username:</td>
                <td><input type="text" value="" name="username" id="username" class="form-control username"></td>
            </tr>
            <tr>
                <td>Password:</td>
                <td><input type="password"  value="" name="password" id="password" class="form-control password"></td>
            </tr>
            <tr>
               <button type="submit" name="login" class="btn btn-default login">Login</button>
            </tr>
        </table>
    {{/if}}
    <div align="left"><a href="{{pathFor 'home'}}"><h3>Home</h3></a></div>
</template>

<template name="register">
    <div>{{> form}}</div>
    <div align="center"><a href="{{pathFor 'home'}}"><h3>Home</h3></a></div>
</template>

<template name="form">
    <div class="container">
        <h1>Welcome to Career Conference Registration</h1>
        <ul class="vertical">
            <li>
                <span class="form-label">
                    <span style="float:left;min-width:150px;">First Name</span>
                    <input type="text" style="max-width:150px;" value="" name="fname" id="fname" class="fname">
                </span>
            </li>
            <li>
                <span class="form-label">
                    <span style="float:left;min-width:150px;">Last Name</span>
                    <input type="text" style="max-width:150px;" value="" name="lname" id="lname" class="lname">
                </span>
            </li>
            <li>
                <span class="form-label">
                    <span style="float:left;min-width:150px;">School Code</span>
                    <input type="text" style="max-width:150px;" value="" name="schoolcode" id="schoolcode" class="schoolcode">
                </span>
            </li>
            <li>
                <span class="form-label">
                    <span style="float:left;min-width:150px;">Student Code</span>
                    <input type="text" style="max-width:150px;" value="" name="studentcode" id="studentcode" class="studentcode">
                </span>
            </li>
        </ul>
    </div>
    <div class="container"><h4>{{{instructions}}}</h4></div>
    <div class="container">
        <ul class="list-group">
            {{#each loop numClasses}}
                {{> timeslotlist}}
            {{/each}}
            <li class="list-group-item">
                <div align="center">
                    <button type="submit" name="register" class="btn btn-default register">Register</button>
                    <span id="alert">{{RegisterMsg}}</span>
                </div>
            </li>
        </ul>
    </div>
    <ul class="list-group">
        {{#each clusters}}
            <li class="list-group-item container">
                <h1>{{clustername}}</h1>
                <ul class="list-group">
                    {{#each query 'Classes' 'classgroup' clustername false}}
                        {{> classlist}}
                    {{/each}}
                </ul>
            </li>
	    {{/each}}
    </ul>
</template>

<template name="timeslotlist">
    <li class="list-group-item">
        <div class="input-group">
            <span class="input-group-addon">Time Slot {{timeslot .}}</span>
            <select class="form-control classselect" name="classselect">
                <option selected hidden disabled value=""></option>
                    {{#each classesAtTime .}}
                        {{#unless classFull _id timeslot}}
                            <option data-meteor-id="{{_id}}" value="{{classname}}">{{classname}}</option>
                        {{else}}
                            <option data-meteor-id="{{_id}}" value="{{classname}}" disabled>{{classname}} (Full)</option>
                        {{/unless}}
                    {{/each}}
            </select>
        </div>
    </li>
</template>

<template name="codes">
    <div class="row">
        <div class="form-group col-lg-7">
            <button type="button" name="deletecodes" class="btn btn-default deletecodes">Delete Codes</button>
            <button type="button" name="generatecodes" class="btn btn-default generatecodes">Generate Codes</button>
            Quantity:
            <input type="number" val="{{codequantity}}" name="codequantity" class="form-control codequantity">
            <span id="alert">Cannot generate over 1000 at a time</span>
        </div>
    </div>
    <table class="table table-condensed table-striped">
        <thead>
            <tr>
                <th>Code</th>
                <th>Available</th>
            </tr>
        </thead>
        <tbody>
        {{#each codes}}
            <tr>
                <td>
                    {{code}}
                </td>
                <td>
                    {{available}}
                </td>
            </tr>
        {{/each}}
        </tbody>
    </table>
</template>

<template name="roster">
    <div class="row">
        <div class="col-lg-4">
            <input type="search" name="searchfield" class="form-control searchfield" placeholder="Search Roster">
        </div>
        <div class="col-lg-4" id="alert">
            <h4>{{SearchMsg}}</h4>
        </div>
    </div>
    <table class="table table-condensed table-striped">
		<thead>
        <tr>
            <th><div class="input-group">
                <span class="input-group-addon">First Name</span>
                <span class="input-group-btn"><button input="submit" name="firstabcsort" class="btn btn-default firstabcsort">Sort</button></span>
            </div></th>
            <th><div class="input-group">
                <span class="input-group-addon">Last Name</span>
                <span class="input-group-btn"><button input="submit" name="lastabcsort" class="btn btn-default lastabcsort">Sort</button></span>
            </div></th>
            <th><div class="input-group">
                <span class="input-group-addon">School</span>
                <span class="input-group-btn"><button input="submit" name="schoolsort" class="btn btn-default schoolsort">Sort</button></span>
            </div></th>
			{{#each classesheader}}
                <th class="header-label-group">
                    <span>Class {{.}}</span>
                </th>
			{{/each}}
            <th><div class="input-group">
                <span class="input-group-addon">Time</span>
                <span class="input-group-btn"><button input="submit" name="timesort" class="btn btn-default timesort">Sort</button></span>
            </div></th>
            <th>
                <button type="button" name="deleteroster" class="btn btn-default deleteroster">Delete All</button>
            </th>
        </tr>
		</thead>
		<tbody>
        {{#if sortTypeFirstABC}}
            {{#each studentsfirstabc}}
                {{> entry}}
            {{/each}}
        {{else}}{{#if sortTypeLastABC}}
            {{#each studentslastabc}}
                {{> entry}}
            {{/each}}
        {{else}}{{#if sortTypeSchool}}
            {{#each studentsschool}}
                {{> entry}}
            {{/each}}
        {{else}}
            {{#each studentstime}}
                {{> entry}}
            {{/each}}
        {{/if}}{{/if}}{{/if}}
        
        {{#if addingNewEntry}}
            {{> newentry}}
        {{/if}}
        
        <tr>
            <td colspan="10">
                <button type="button" name="addnewentry" class="btn btn-default addnewentry"><span class="glyphicon glyphicon-plus-sign"></span>Add New Student</button>
            </td>
        </tr>
	</tbody>
	</table>
</template>

<template name="entry">
    {{#if entrySearched _id}}
    <tr>
        {{#unless entrySelected _id}}
            <td>{{fname}}</td>
		    <td>{{lname}}</td>
		    <td>{{schoolname}}</td>
		    {{#each classnames}}
			    <td>{{.}}</td>
		    {{/each}}
            {{#each blankspaces classnames}}
                <td></td>
            {{/each}}
            <td class="col-lg-2">{{time}}</td>
            <td class="col-lg-2"><div class="btn-group" style="min-width:150px;">
                <button type="button" name="editentry" class="btn btn-default editentry"><span class="glyphicon glyphicon-pencil"></span></button>
                <button type="button" name="deleteentry" class="btn btn-default deleteentry"><span class="glyphicon glyphicon-trash"></span></button>
            </div></td>
        {{else}}
            <td><input type="text" value="{{fname}}" name="fnameentry" class="form-control fnameentry"/></td>
            <td><input type="text" value="{{lname}}" name="lnameentry" class="form-control lnameentry"/></td>
            <td>
                <select name="schoolnameentry" class="form-control schoolnameentry">
                    {{#each schools}}
                        {{#unless equals ../schoolname schoolname}}
                            <option value="{{schoolname}}">{{schoolname}}</option>
                        {{else}}
                            <option value="{{schoolname}}" selected>{{schoolname}}</option>
                        {{/unless}}
                    {{/each}}
                </select>
            </td>
            {{#each indexArray classnames}}
                <td>
                    <select name="classnameentry" class="form-control classnameentry">
                        {{#each clusters}}
                            <option disabled>{{clustername}}</option>
                            {{#each classSelector clustername ../index}}
                                {{#unless equals ../../value classname}}
                                    <option value="{{classname}}">{{classname}}</option>
                                {{else}}
                                    <option value="{{classname}}" selected>{{classname}}</option>
                                {{/unless}}
                            {{/each}}
                        {{/each}}
                    </select>
                </td>
            {{/each}}
            {{#each blankspaces classnames}}
                <td></td>
            {{/each}}
            <td class="col-lg-2"><input type="text" value="{{time}}" name="timeentry" class="form-control timeentry"/></td>
            <td class="col-lg-2"><div class="btn-group" style="min-width:150px;">
                <button type="button" name="saveentry" class="btn btn-default saveentry"><span class="glyphicon glyphicon-ok"></span></button>
                <button type="button" name="cancelentry" class="btn btn-default cancelentry"><span class="glyphicon glyphicon-remove"></span></button>
            </div></td>
        {{/unless}}
    </tr>
    {{/if}}
</template>

<template name="newentry">
    <tr>
        <td><input type="text" name="fnameentry" class="form-control fnameentry"/></td>
        <td><input type="text" name="lnameentry" class="form-control lnameentry"/></td>
        <td>
            <select name="schoolnameentry" class="form-control schoolnameentry">
                {{#each schools}}
                    <option value="{{schoolname}}">{{schoolname}}</option>
                {{/each}}
            </select>
        </td>
        {{#each classesheader}}
            <td>
                <select name="classnameentry" class="form-control classnameentry">
                    {{#each clusters}}
                        <option disabled>{{clustername}}</option>
                        {{#each classSelector clustername ..}}
                            <option value="{{classname}}">{{classname}}</option>
                        {{/each}}
                    {{/each}}
                </select>
            </td>
        {{/each}}
        <td class="col-lg-2"><input type="text" name="timeentry" class="form-control timeentry"/></td>
        <td class="col-lg-2"><div class="btn-group">
            <button type="button" name="savenewentry" class="btn btn-default savenewentry"><span class="glyphicon glyphicon-ok"></span></button>
            <button type="button" name="cancelnewentry" class="btn btn-default cancelnewentry"><span class="glyphicon glyphicon-remove"></span></button>
        </div></td>
    </tr>
</template>

<template name="general">
    <ul class="list-group container">
        <li class="list-group-item" style="background-color:#f5f5f5">
            <div align="center">
                <h4>Time Slots</h4>
            </div>
        </li>
        {{#unless editingNumClasses}}
            <li class="list-group-item">
                <div align="center">
                    Number Of Time Slots/Classes To Register For: {{numClasses}}
                    <button type="button" name="editnumclasses" class="btn btn-default editnumclasses"><span class="glyphicon glyphicon-pencil"></span></button>
                </div>
            </li>
        {{else}}
            <li class="list-group-item">
                <div align="center">
                    Number Of Time Slots/Classes To Register For:
                    <input type="text" value="{{numClasses}}" name="timeslotsentry" class="timeslotsentry form-control">
                    <div class="btn-group" align="center">
                        <button type="button" name="savenumclasses" class="btn btn-default savenumclasses"><span class="glyphicon glyphicon-ok"></span></button>
                        <button type="button" name="cancelnumclasses" class="btn btn-default cancelnumclasses"><span class="glyphicon glyphicon-remove"></span></button>
                    </div>
                </div>
            </li>
        {{/unless}}
        {{#unless editingGeneralSettings}}
            <li class="list-group-item">
                <div align="center">
                    <ul class="vertical">
                        {{#each timeslots}}
                            <li>Slot {{sum slot 1}} Description/Time: {{time}}</li>
                        {{/each}}
                    </ul>
                </div>
                <div align="center">
                    <button type="button" name="editgeneralsettings" class="btn btn-default editgeneralsettings"><span class="glyphicon glyphicon-pencil"></span></button>
                </div>
            </li>
        {{else}}
            <li class="list-group-item">
                <ul class="vertical">
                    <div align="center">
                        {{#each editabletimeslots}}
                            <li>
                                Slot {{sum index 1}} Description/Time:
                                <input type="text" value="{{value}}" name="timeslotentry" class="timeslotentry form-control">
                            </li>
                        {{/each}}
                    </div>
                </ul>
                <div align="center">
                    <div class="btn-group">
                        <button type="button" name="savegeneralsettings" class="btn btn-default savegeneralsettings"><span class="glyphicon glyphicon-ok"></span></button>
                        <button type="button" name="cancelgeneralsettings" class="btn btn-default cancelgeneralsettings"><span class="glyphicon glyphicon-remove"></span></button>
                    </div>
                </div>
            </li>
        {{/unless}}
    </ul>
    <ul class="list-group container">
        <li class="list-group-item" style="background-color:#f5f5f5">
            <div align="center">
                <h4>Home Page Description</h4>
            </div>
        </li>
        {{#unless editingMainDescription}}
            <li class="list-group-item">
            <div align="center">
                {{{maindescription}}}
            </div>
            <div align="center">
                <button type="button" name="editmaindescription" class="btn btn-default editmaindescription"><span class="glyphicon glyphicon-pencil"></span></button>
            </div>
            </li>
        {{else}}
            <li class="list-group-item">
                <div align="center">
                    <textarea rows=4 style="resize:vertical;" name="maindescriptionentry" class="form-control maindescriptionentry">{{maindescription}}</textarea>
                </div>
                <div align="center">
                    <div class="btn-group">
                        <button type="button" name="savemaindescription" class="btn btn-default savemaindescription"><span class="glyphicon glyphicon-ok"></span></button>
                        <button type="button" name="cancelmaindescription" class="btn btn-default cancelmaindescription"><span class="glyphicon glyphicon-remove"></span></button>
                    </div>
                </div>
            </li>
        {{/unless}}
    </ul>
    <ul class="list-group container">
        <li class="list-group-item" style="background-color:#f5f5f5;">
            <div align="center">
                <h4>Registration Instructions</h4>
            </div>
        </li>
        {{#unless editingInstructions}}
            <li class="list-group-item">
                <div align="center">
                    {{{instructions}}}
                </div>
                <div align="center">
                    <button type="editinstructions" name="editinstructions" class="btn btn-default editinstructions"><span class="glyphicon glyphicon-pencil"></span></button>
                </div>
            </li>
        {{else}}
            <li class="list-group-item">
                <div align="center">
                    <textarea rows=4 style="resize:vertical;" name="instructionsentry" class="form-control instructionsentry">{{instructions}}</textarea>
                </div>
                <div align="center">
                    <div class="btn-group">
                        <button type="button" name="saveinstructions" class="btn btn-default saveinstructions"><span class="glyphicon glyphicon-ok"></span></button>
                        <button type="button" name="cancelinstructions" class="btn btn-default cancelinstructions"><span class="glyphicon glyphicon-remove"></span></button>
                    </div>
                </div>
            </li>
        {{/unless}}
    </ul>
</template>

<template name="classes">
    <div class="panel panel-default container">
        <div align="center" class="panel-heading"><h4>Groups</h4></div>
        <div align="center" class="panel-body">
            <ul class="horizontal">
                {{#each clusters}}
                    {{> clusterentry}}
                {{/each}}

                {{#if addingNewCluster}}
                    {{> newclusterentry}}
                {{/if}}
            </ul>
        </div>
        <div align="center" class="">
            <button type="button" name="addnewcluster" class="btn btn-default addnewcluster"><span class="glyphicon glyphicon-plus-sign"></span>Add New</button>
        </div>
    </div>
    {{#each classes}}
        {{> classentry}}
    {{/each}}
    
    {{#if addingNewClass}}
        {{> newclassentry}}
    {{/if}}

    <div class="panel panel-default container">
        <div align="center" class="panel-heading">
            <button type="button" name="addnewclass" class="btn btn-default addnewclass"><span class="glyphicon glyphicon-plus-sign"></span>Add New Class</button>
        </div>
    </div>
</template>

<template name="classentry">
    <div class="panel panel-default container">
        <table class="table table-condensed table-striped" style="table-layout: fixed; word-wrap: break-word;">
            {{#unless classSelected _id}} 
                <thead>
                    <tr>
                        <th class="col-sm-3">
                            <div align="left">
                                <h4>{{classname}}</h4>
                            </div>
                        </th>
                        <th class="col-sm-1">
                            <div align="center">
                                <div class="btn-group">
                                    <button type="button" name="editclass" class="editclass btn btn-default"><span class="glyphicon glyphicon-pencil"></span></button>
                                    <button type="button" name="deleteclass" class="deleteclass btn btn-default"><span class="glyphicon glyphicon-trash"></span></button>
                                </div>
                            </div>
                        </th>
                        <th class="col-sm-1">
                            <div align="center">
                                <h4>{{classroom}}</h4>
                            </div>
                        </th>
                        <th class="col-sm-2">
                            <div align="center">
                                <span><h4>
                                    Time Slot: 
                                    {{#each classtimeslot}}
                                        {{timeslot .}}
                                    {{/each}}
                                </h4></span>
                            </div>
                        </th>
                        <th class="col-sm-2">
                            <div align="center">
                                <span><h4>Required: {{classrequired}}</h4></span>
                            </div>
                        </th>
                        <th class="col-sm-1">
                            <div align="center">
                                <h4>{{classgroup}}</h4>
                            </div>
                        </th>
                        <th class="col-sm-1">
                            <div align="right">
                                <span><h4>
                                    {{#each classtimeslot}}
                                        {{livecount ../_id .}}/{{../classsizelimit}}
                                    {{/each}}
                                </h4></span>
                            </div>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td colspan="13">
                            {{{classdescription}}}
                        </td>
                    </tr>
                    <tr>
                        <td colspan="13">
                            <div align="left">
                                <button id="{{_id}}" type="button" name="listclass" class="listclass btn btn-default">List</button>
                            </div>
                        </td>
                    </tr>
                </tbody>
            {{else}}
                <thead>
                    <tr>
                        <th class="col-sm-3">
                            <div align="left">
                                <span>
                                    Class Name:
                                    <input type="text" value="{{classname}}" name="classnameentry" class="form-control classnameentry">
                                </span>
                            </div>
                        </th>
                        <th class="col-sm-2">
                            <div align="center">
                                <span>
                                    Room:
                                    <input type="text" value="{{classroom}}" name="classroomentry" class="form-control classroomentry">
                                </span>
                            </div>
                        </th>
                        <th class="col-sm-2">
                            <div align="center">
                                <span>
                                    Time Slot:
                                    <form action="action" name="classtimeslotentry" class="form-control classtimeslotentry">
                                        {{#each loop numClasses}}
                                            {{#unless contains ../classtimeslot .}}
                                                <input class="classtimeslotbox" type="checkbox" value="{{.}}">
                                            {{else}}
                                                <input class="classtimeslotbox" type="checkbox" value="{{.}}" checked>
                                            {{/unless}}
                                        {{/each}}
                                    </form>
                                </span>
                            </div>
                        </th>
                        <th class="col-sm-2">
                            <div align="center">
                                <span>
                                    Required:
                                    <select name="classrequiredentry" class="form-control classrequiredentry">
                                        <option value="No">No</option>
                                        <option value="Yes">Yes</option>
                                    </select>
                                </span>
                            </div>
                        </th>
                        <th class="col-sm-2">
                            <div align="center">
                                <span>
                                    Group:
                                    <select name="classgroupentry" class="form-control classgroupentry">
                                        {{#each clusters}}
                                            {{#unless equals ../classgroup clustername}}
                                                <option value="{{clustername}}">{{clustername}}</option>
                                            {{else}}
                                                <option value="{{clustername}}" selected>{{clustername}}</option>
                                            {{/unless}}
                                        {{/each}}
                                    </select>
                                </span>
                            </div>
                        </th>
                        <th class="col-sm-1">
                            <div align="right">
                                <span>
                                    Size Limit:
                                    <input type="text" value="{{classsizelimit}}" name="classsizelimitentry" class="form-control classsizelimitentry">
                                </span>
                            </div>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td colspan="10">
                            Description:
                            <textarea rows=4 style="resize:vertical;" name="classdescriptionentry" class="form-control classdescriptionentry">{{classdescription}}</textarea>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="10">
                            <div align="right">
                                <div class="btn-group">
                                    <button type="button" name="saveclass" class="saveclass btn btn-default"><span class="glyphicon glyphicon-ok"></span></button>
                                    <button type="button" name="cancelclass" class="cancelclass btn btn-default"><span class="glyphicon glyphicon-remove"></span></button>
                                </div>
                            </div>
                        </td>
                    </tr>
                </tbody> 
            {{/unless}}
        </table>
        {{#if listClassSelected _id}}
            <table class="table table-condensed table-striped">
                <thead>
                    <tr>
                        <th class="header-label-group">
                            <span>First Name</span>
                        </th>
                        <th class="header-label-group">
                            <span>Last Name</span>
                        </th>
                        <th class="header-label-group">
                            <span>School</span>
                        </th>
                        {{#each classesheader}}
                            <th class="header-label-group">
                                <span>Class {{.}}</span>
                            </th>
                        {{/each}}
                        <th class="header-label-group">
                            <span>Time</span>
                        </th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    {{#each query 'Students' 'classnames' classname}}
                        {{> entry}}    
                    {{/each}}
                </tbody>
            </table>
        {{/if}}
</div>
</template>

<template name="newclassentry">
<div class="panel panel-default container">
    <table class="table table-condensed table-striped">
        <thead>
            <tr>
                <th>
                    <div align="left">
                        Class Name:
                        <input type="text" value="" name="classnameentry" class="form-control classnameentry">
                    </div>
                </th>
                <th>
                    <div align="left">
                        Room:
                        <input type="text" value="" name="classroomentry" class="form-control classroomentry">
                    </div>
                </th>
                <th class="col-sm-2">
                    <div align="center">
                        Time Slot:
                        <form name="classtimeslotentry" class="form-control classtimeslotentry">
                            {{#each loop numClasses}}
                                <input class="classtimeslotbox" type="checkbox" value="{{.}}">
                            {{/each}}
                        </form>
                    </div>
                </th>
                <th class="col-sm-2">
                    <div align="center">
                        Required:
                        <select name="classrequiredentry" class="form-control classrequiredentry">
                            <option value="No">No</option>
                            <option value="Yes">Yes</option>
                        </select>
                    </div>
                </th>
                <th class="col-sm-2">
                    <div align="center">
                        Group:
                        <select name="classgroupentry" class="form-control classgroupentry">
                            {{#each clusters}}
                                <option value="{{clustername}}">{{clustername}}</option>
                            {{/each}}
                        </select>
                    </div>
                </th>
                <th class="col-sm-1">
                    <div align="right">
                        Size Limit:
                        <input type="text" value="" name="classsizelimitentry" class="form-control classsizelimitentry">
                    </div>
                </th>
            </tr>
        </thead>
        <tbody>
        <tr>
            <td colspan="6">
                Description:
                <textarea rows=4 style="resize:vertical;" name="classdescriptionentry" class="form-control classdescriptionentry"></textarea>
            </td>
        </tr>
        <tr>
            <td colspan="6">
                <div align="right">
                    <div class="btn-group">
                        <button type="button" name="savenewclass" class="savenewclass btn btn-default"><span class="glyphicon glyphicon-ok"></span></button>
                        <button type="button" name="cancelnewclass" class="cancelnewclass btn btn-default"><span class="glyphicon glyphicon-remove"></span></button>
                    </div>
                </div>
            </td>
        </tr>
        </tbody> 
    </table>
</div>

</template>

<template name="clusterentry">
{{#unless clusterSelected _id}}
    <li>
    <div align="center">
        <h5>{{clustername}}</h5>
    </div>
    <div align="center">
        <div class="btn-group">
            <button class="btn btn-default editcluster" name="editcluster"><span class="glyphicon glyphicon-pencil"></span></button>
            <button class="btn btn-default deletecluster" name="deletecluster"><span class="glyphicon glyphicon-trash"></span></button>
        </div>
    </div>
    </li>
{{else}}
    <li>
    <div align="center">
        <input type="text" value="{{clustername}}" name="clusternameentry" class="form-control clusternameentry">
    </div>
    <div align="center">
        <div class="btn-group">
            <button class="btn btn-default savecluster" name="savecluster"><span class="glyphicon glyphicon-ok"></span></button>
            <button class="btn btn-default cancelcluster" name="cancelcluster"><span class="glyphicon glyphicon-remove"></span></button>
        </div>
    </div>
    </li>
{{/unless}}
</template>

<template name="newclusterentry">
    <li>
    <div align="center">
        <input type="text" name="clusternameentry" class="form-control clusternameentry">
    </div>
    <div align="center">
        <div class="btn-group">
            <button class="btn btn-default savenewcluster" name="savenewcluster"><span class="glyphicon glyphicon-ok"></span></button>
            <button class="btn btn-default cancelnewcluster" name="cancelnewcluster"><span class="glyphicon glyphicon-remove"></span></button>
        </div>
    </div>
    </li> 
</template>

<template name="schools">
<table class="table table-condensed table-striped">
    <thead>
        <tr>
            <th colspan="1" class="header-label-group">
                <span>Name</span>
            </th>
            <th colspan="2" class="header-label-group">
                <span>Code</span>
            </th>
        </tr>
    </thead>
    <tbody>
        {{#each schools}}
            {{> schoolentry}}
        {{/each}}

        {{#if addingNewSchool}}
            {{> newschoolentry}}
        {{/if}}

        <tr>
            <td colspan="10">
                <button type="button" name="addnewschool" class="btn btn-default addnewschool"><span class="glyphicon glyphicon-plus-sign"></span>Add New School</button>
            </td>
        </tr>
    </tbody>
</table>
</template>

<template name="schoolentry">
    <tr>
        {{#unless schoolSelected _id}}
        <td>
            {{schoolname}}
        </td>
        <td>
            {{schoolcode}}
        </td>
        <td>
            <div class="btn-group">
                <button type="button" name="editschool" class="btn btn-default editschool"><span class="glyphicon glyphicon-pencil"></span></button>
                <button type="button" name="deleteschool" class="btn btn-default deleteschool"><span class="glyphicon glyphicon-trash"></span></button> 
            </div>
        </td>
        {{else}}
        <td>
            <input type="text" value="{{schoolname}}" name="schoolnameentry" class="form-control schoolnameentry">
        </td>
        <td>
            <input type="text" value="{{schoolcode}}" name="schoolcodeentry" class="form-control schoolcodeentry">
        </td>
        <td>
            <div class="btn-group">
                <button type="button" name="saveschool" class="btn btn-default saveschool"><span class="glyphicon glyphicon-ok"></span></button>
                <button type="button" name="cancelschool" class="btn btn-default cancelschool"><span class="glyphicon glyphicon-remove"></span></button> 
            </div>
        </td> 
        {{/unless}}
    </tr>
</template>

<template name="newschoolentry">
    <tr>
        <td>
            <input type="text" name="schoolnameentry" class="form-control schoolnameentry">
        </td>
        <td>
            <input type="text" name="schoolcodeentry" class="form-control schoolcodeentry">
        </td>
        <td>
            <div class="btn-group">
            <button type="button" name="savenewschool" class="btn btn-default savenewschool"><span class="glyphicon glyphicon-ok"></span></button>
            <button type="button" name="cancelnewschool" class="btn btn-default cancelnewschool"><span class="glyphicon glyphicon-remove"></span></button> 
            </div>
        </td>
    </tr>
</template>

<template name="print">
    <div class="panel panel-default">
        <div class="panel-heading" align="center"><h3>Files</h3></div>
        <div class="panel-body" align="center">
            <button type="button" name="getcsv" class="offset btn btn-default getcsv">Get Roster CSV File</button>
            <button type="button" name="getcodes" class="offset btn btn-default getcodes">Get Codes CSV File</button>
        </div>
    </div>
    <div class="panel panel-default">
        <div class="panel-heading" align="center">
        <h3>Nametags Template</h3>
        </div>
        <div class="panel-body" align="center">
            <div class="tag-preview">
                Last Name, First Name
                <br>
                School
                <br>
                <br>
                <div class="classes-tag">
                    Time, Session 1, Room #
                    <br>
                    Time, Session 2, Room #
                    <br>
                    Time, Session 3, Room #
                    <br>
                    Time, Session 4, Room #
                </div>
            </div>
        </div>
        {{#if printingNametags}}
            <iframe src="{{pathFor 'nametags'}}" hidden></iframe>
        {{/if}}
        <div align="center">
            <button type="button" name="printnametags" class="btn btn-default printnametags"><span class="glyphicon glyphicon-print"></span></button>
        </div>
        <br>
    </div>
</template>

<template name="nametags">
    {{#each nametagspage}}
        <div class="page">
        {{#each indexArray .}}
            <div class="tag">
                {{value.lname}}, {{value.fname}}
                <br>
                {{value.schoolname}}
                <br>
                <div class="classes-tag">
                    {{#each indexArray value.classnames}}
                        <br>
                        {{queryget 'Timeslots' 'slot' index 'time' true}}, {{value}}, {{queryget 'Classes' 'classname' value 'classroom' true}}
                    {{/each}}
                </div>
            </div>
            {{#if value.isFinal}}
                <script>
                    document.execCommand('print', false, null);
                    parent.postMessage("printedNametags", "*");
                </script>
            {{/if}}
        {{/each}}
        </div>
        <div class="page-break"></div>
    {{/each}}
</template>

<template name="controls">
    <h4 id="alert">{{ControlMsg}}</h4>
    <button type="submit" name="togglereg" class="btn btn-default togglereg"><span class="glyphicon glyphicon-off"></span>{{RegistrationControlButton}}</button>
</template>

<template name="classlist">
    <li class="panel panel-default list-group-item">
        <div class="panel-heading">
            <h4>{{classname}}</h4>
        </div>
        <div class="panel-body">
            {{{classdescription}}}
        </div>
    </li>
</template>
